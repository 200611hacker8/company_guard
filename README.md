Company Guard
===============

وصف المشروع (بالعربية)
----------------------
نظام ويب بسيط لحماية وإدارة دخول الموظفين، مكوّن من أدوار: admin، assistant، employee. يوفّر لوحة لإدارة المستخدمين، رفع الملفات لكل مستخدم، وتسجيل الأحداث والتعليمات.

المتطلبات
---------
- Python 3.8+
- حزمة Flask

تثبيت وتشغيل (PowerShell)
-------------------------
```powershell
python -m venv .venv
.venv\Scripts\Activate.ps1
pip install -r requirements.txt
python .\app.py
```

الوصول
------
افتح المتصفح: http://127.0.0.1:5000/

تسجيل حساب Admin
-----------------
- أذهب إلى صفحة Register.
- اختر Role = Admin.
- سيظهر حقل "Admin code". أدخِل قيمة `admin_code` الموجودة في `data/settings.json` (افتراضيًا "AdminSecret").
- إذا لم تمتلك الكود، سجّل كـ Employee أو Assistant ثم اطلب من الأدمن إنشاء حساب أو تغيير الإعدادات.

ملاحظات أمان سريعة
------------------
- كلمات المرور تستخدم الآن تجزئة آمنة (werkzeug). النظام يدعم حسابات قديمة مخزنة بSHA256 كـ fallback.
- تم تقييد أنواع الملفات المسموح رفعها (pdf, png, jpg, jpeg, txt, xlsx, csv) والحد الأقصى لحجم الرفع 16 MB.
- تأكد من استخدام HTTPS على بيئة الإنتاج.

تغييرات تمت
------------
- تحسين تخزين كلمات المرور إلى werkzeug hashes.
- استخدام secure_filename لتنظيف أسماء الملفات.
- إضافة admin_code منفصل في `data/settings.json` للتحكم بتسجيل حسابات الأدمن.
- إضافة قيود رفع ملفات وحفظها ضمن `uploads/`.

خطوات مقترحة لاحقة
------------------
- استبدال طريقة عرض `global_password` بكاملها لتخزين آمن (أو إخفاءها تمامًا).
- فرض تغيير كلمات المرور لحسابات قديمة.
- إضافة اختبارات وحدية.


